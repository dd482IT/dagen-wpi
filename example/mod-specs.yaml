defaultSchema: drugs
generateUnqualifiedNamesForSchemas: ["drugs"]
modificationStatementSpecs:

  ##################################################################
  - statementName: drug insert with named params
    command: INSERT
    table: drug
    parametersType: NAMED # <- default, or NUMBERED
    inputFields:
      - field: id
      - field: name
        value: "(:namePrefix || ':' || :nameSuffix)"
        expressionValueParamNames: [namePrefix, nameSuffix]
      - field: compound_id
        value: (2 - 1) # expression, must be enclosed in parens
      - field: mesh_id
      # value ":meshId" due to chosen param name default
      - field: registered_by

  ##################################################################
  - statementName: drug insert with numbered params
    command: INSERT
    table: drug
    parametersType: NUMBERED
    inputFields:
      - field: id
      - field: name
        value: "(? || ':' || ?)"
        expressionValueParamNames: [namePrefix, nameSuffix]
      - field: compound_id
        value: (2 - 1) # expression, must be enclosed in parens
        expressionValueParamNames: []
      - field: mesh_id
      - field: registered_by

  ##################################################################
  - statementName: drug update with named params
    command: UPDATE
    table: drug
    tableAlias: d
    parametersType: NAMED
    inputFields:
      - field: name
        value: "(:namePartOne || '-' || :namePartTwo)"
        expressionValueParamNames: [namePartOne, namePartTwo]
      - field: compound_id
      - field: mesh_id
    fieldParamConditions:
      - field: cid
      - field: mesh_id
        paramName: oldMeshId
    condition: d.compound_id < 0

  ##################################################################
  - statementName: drug update with numbered params
    command: UPDATE
    table: drug
    tableAlias: d
    parametersType: NUMBERED
    inputFields:
      - field: name
        value: "(? || '-' || ?)"
        expressionValueParamNames: [namePartOne, namePartTwo]
      - field: compound_id
      - field: mesh_id
    fieldParamConditions:
      - field: cid
      - field: mesh_id
        paramName: oldMeshId
    condition: d.compound_id < 0

  ##################################################################
  - statementName: drug delete
    command: DELETE
    table: drug
    fieldParamConditions:
      - field: cid

  ##################################################################
  - statementName: lesser drugs delete
    command: DELETE
    table: drug
    fieldParamConditions:
      - field: cid
        op: LT

  ##################################################################
  - statementName: drugs list delete
    command: DELETE
    table: drug
    fieldParamConditions:
      - field: cid
        op: IN
